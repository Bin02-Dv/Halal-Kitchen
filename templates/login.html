{% extends "base.html" %}

{% load static %}
{% block title %}Login - Halal Kitchen Utensils Hub{% endblock %}

{% block content %}
<!-- Login Section -->
    <section class="py-12 sm:py-16">
        <div class="container mx-auto px-4">
            <div class="max-w-md mx-auto bg-white rounded-lg shadow-md p-6 sm:p-8">
                <h2 class="text-2xl sm:text-3xl font-bold text-center text-gray-800 mb-6 sm:mb-8">Login</h2>
                <form id="login" method="POST">
                    {% csrf_token %}
                    <div class="space-y-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1" for="email">Email</label>
                        <input type="email" id="email" name="email" class="w-full border rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-halal-green" placeholder="Enter your email" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1" for="password">Password</label>
                        <input type="password" id="password" name="password" class="w-full border rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-halal-green" placeholder="Enter your password" required>
                    </div>
                    <button class="bg-halal-green text-white px-6 py-3 rounded-full font-semibold hover:bg-green-700 transition w-full text-center">
                        Sign In
                    </button>
                    <p class="text-center text-sm text-gray-600">
                        Don't have an account? <a href="#" class="text-halal-green hover:underline">Sign up</a>
                    </p>
                </div>
                </form>
            </div>
        </div>
    </section>

<script src="{% static 'js/jquery-3.5.1.js' %}"></script>
<script>
    // ajax
$(document).on('submit', '#login', function (e){
    e.preventDefault();
    var m_success = $(".success");
    var m_error = $(".error");
    var m_info = $(".info");
    var m_text = $(".message");

    var formData = new FormData(this);

    $.ajax({
        type: 'POST',
        url: "/login/",
        data: formData,
        processData: false,
        contentType: false,
        success: function (response){
            var success = response['success'];
            if(success){
                m_success.show();
                m_error.hide();
                m_info.hide();

                m_text.html('');
                m_text.append(response['message']);

                setTimeout(() => {
                    $(".toast").fadeOut();
                }, 5000);

                window.location.href = '/'

            }else{
                m_error.show();
                m_success.hide();
                m_info.hide();

                m_text.html('');
                m_text.append(response['message']);

                setTimeout(() => {
                    $(".toast").fadeOut();
                }, 5000);
            }

        }
    });
});
</script>
{% endblock %}